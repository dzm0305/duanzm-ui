{"remainingRequest":"/Users/duanzhimin/Java/MyWorkspaces/duanzm-ui/node_modules/babel-loader/lib/index.js!/Users/duanzhimin/Java/MyWorkspaces/duanzm-ui/node_modules/eslint-loader/index.js??ref--13-0!/Users/duanzhimin/Java/MyWorkspaces/duanzm-ui/src/plugins/download.js","dependencies":[{"path":"/Users/duanzhimin/Java/MyWorkspaces/duanzm-ui/src/plugins/download.js","mtime":1632740083000},{"path":"/Users/duanzhimin/Java/MyWorkspaces/duanzm-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/duanzhimin/Java/MyWorkspaces/duanzm-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/duanzhimin/Java/MyWorkspaces/duanzm-ui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvZHVhbnpoaW1pbi9KYXZhL015V29ya3NwYWNlcy9kdWFuem0tdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0IikuZGVmYXVsdDsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwoKdmFyIF9maWxlU2F2ZXIgPSByZXF1aXJlKCJmaWxlLXNhdmVyIik7Cgp2YXIgX2F4aW9zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJheGlvcyIpKTsKCnZhciBfYXV0aCA9IHJlcXVpcmUoIkAvdXRpbHMvYXV0aCIpOwoKdmFyIGJhc2VVUkwgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJOwp2YXIgX2RlZmF1bHQgPSB7CiAgbmFtZTogZnVuY3Rpb24gbmFtZShfbmFtZSkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgaXNEZWxldGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CiAgICB2YXIgdXJsID0gYmFzZVVSTCArICIvY29tbW9uL2Rvd25sb2FkP2ZpbGVOYW1lPSIgKyBlbmNvZGVVUkkoX25hbWUpICsgIiZkZWxldGU9IiArIGlzRGVsZXRlOwogICAgKDAsIF9heGlvcy5kZWZhdWx0KSh7CiAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgIHVybDogdXJsLAogICAgICByZXNwb25zZVR5cGU6ICdibG9iJywKICAgICAgaGVhZGVyczogewogICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgKDAsIF9hdXRoLmdldFRva2VuKSgpCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtyZXMuZGF0YV0pOwoKICAgICAgX3RoaXMuc2F2ZUFzKGJsb2IsIGRlY29kZVVSSShyZXMuaGVhZGVyc1snZG93bmxvYWQtZmlsZW5hbWUnXSkpOwogICAgfSk7CiAgfSwKICByZXNvdXJjZTogZnVuY3Rpb24gcmVzb3VyY2UoX3Jlc291cmNlKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICB2YXIgdXJsID0gYmFzZVVSTCArICIvY29tbW9uL2Rvd25sb2FkL3Jlc291cmNlP3Jlc291cmNlPSIgKyBlbmNvZGVVUkkoX3Jlc291cmNlKTsKICAgICgwLCBfYXhpb3MuZGVmYXVsdCkoewogICAgICBtZXRob2Q6ICdnZXQnLAogICAgICB1cmw6IHVybCwKICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArICgwLCBfYXV0aC5nZXRUb2tlbikoKQogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbcmVzLmRhdGFdKTsKCiAgICAgIF90aGlzMi5zYXZlQXMoYmxvYiwgZGVjb2RlVVJJKHJlcy5oZWFkZXJzWydkb3dubG9hZC1maWxlbmFtZSddKSk7CiAgICB9KTsKICB9LAogIHppcDogZnVuY3Rpb24gemlwKHVybCwgbmFtZSkgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgdmFyIHVybCA9IGJhc2VVUkwgKyB1cmw7CiAgICAoMCwgX2F4aW9zLmRlZmF1bHQpKHsKICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgdXJsOiB1cmwsCiAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyAoMCwgX2F1dGguZ2V0VG9rZW4pKCkKICAgICAgfQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3Jlcy5kYXRhXSwgewogICAgICAgIHR5cGU6ICdhcHBsaWNhdGlvbi96aXAnCiAgICAgIH0pOwoKICAgICAgX3RoaXMzLnNhdmVBcyhibG9iLCBuYW1lKTsKICAgIH0pOwogIH0sCiAgc2F2ZUFzOiBmdW5jdGlvbiBzYXZlQXModGV4dCwgbmFtZSwgb3B0cykgewogICAgKDAsIF9maWxlU2F2ZXIuc2F2ZUFzKSh0ZXh0LCBuYW1lLCBvcHRzKTsKICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"sources":["/Users/duanzhimin/Java/MyWorkspaces/duanzm-ui/src/plugins/download.js"],"names":["baseURL","process","env","VUE_APP_BASE_API","name","isDelete","url","encodeURI","method","responseType","headers","then","res","blob","Blob","data","saveAs","decodeURI","resource","zip","type","text","opts"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,gBAA5B;eAEe;AACbC,EAAAA,IADa,gBACRA,KADQ,EACe;AAAA;;AAAA,QAAjBC,QAAiB,uEAAN,IAAM;AAC1B,QAAIC,GAAG,GAAGN,OAAO,GAAG,4BAAV,GAAyCO,SAAS,CAACH,KAAD,CAAlD,GAA2D,UAA3D,GAAwEC,QAAlF;AACA,wBAAM;AACJG,MAAAA,MAAM,EAAE,KADJ;AAEJF,MAAAA,GAAG,EAAEA,GAFD;AAGJG,MAAAA,YAAY,EAAE,MAHV;AAIJC,MAAAA,OAAO,EAAE;AAAE,yBAAiB,YAAY;AAA/B;AAJL,KAAN,EAKGC,IALH,CAKQ,UAAAC,GAAG,EAAI;AACb,UAAMC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACF,GAAG,CAACG,IAAL,CAAT,CAAb;;AACA,MAAA,KAAI,CAACC,MAAL,CAAYH,IAAZ,EAAkBI,SAAS,CAACL,GAAG,CAACF,OAAJ,CAAY,mBAAZ,CAAD,CAA3B;AACD,KARD;AASD,GAZY;AAabQ,EAAAA,QAba,oBAaJA,SAbI,EAaM;AAAA;;AACjB,QAAIZ,GAAG,GAAGN,OAAO,GAAG,qCAAV,GAAkDO,SAAS,CAACW,SAAD,CAArE;AACA,wBAAM;AACJV,MAAAA,MAAM,EAAE,KADJ;AAEJF,MAAAA,GAAG,EAAEA,GAFD;AAGJG,MAAAA,YAAY,EAAE,MAHV;AAIJC,MAAAA,OAAO,EAAE;AAAE,yBAAiB,YAAY;AAA/B;AAJL,KAAN,EAKGC,IALH,CAKQ,UAAAC,GAAG,EAAI;AACb,UAAMC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACF,GAAG,CAACG,IAAL,CAAT,CAAb;;AACA,MAAA,MAAI,CAACC,MAAL,CAAYH,IAAZ,EAAkBI,SAAS,CAACL,GAAG,CAACF,OAAJ,CAAY,mBAAZ,CAAD,CAA3B;AACD,KARD;AASD,GAxBY;AAyBbS,EAAAA,GAzBa,eAyBTb,GAzBS,EAyBJF,IAzBI,EAyBE;AAAA;;AACb,QAAIE,GAAG,GAAGN,OAAO,GAAGM,GAApB;AACA,wBAAM;AACJE,MAAAA,MAAM,EAAE,KADJ;AAEJF,MAAAA,GAAG,EAAEA,GAFD;AAGJG,MAAAA,YAAY,EAAE,MAHV;AAIJC,MAAAA,OAAO,EAAE;AAAE,yBAAiB,YAAY;AAA/B;AAJL,KAAN,EAKGC,IALH,CAKQ,UAAAC,GAAG,EAAI;AACb,UAAMC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACF,GAAG,CAACG,IAAL,CAAT,EAAqB;AAAEK,QAAAA,IAAI,EAAE;AAAR,OAArB,CAAb;;AACA,MAAA,MAAI,CAACJ,MAAL,CAAYH,IAAZ,EAAkBT,IAAlB;AACD,KARD;AASD,GApCY;AAqCbY,EAAAA,MArCa,kBAqCNK,IArCM,EAqCAjB,IArCA,EAqCMkB,IArCN,EAqCY;AACvB,2BAAOD,IAAP,EAAajB,IAAb,EAAmBkB,IAAnB;AACD;AAvCY,C","sourcesContent":["import { saveAs } from 'file-saver'\nimport axios from 'axios'\nimport { getToken } from '@/utils/auth'\n\nconst baseURL = process.env.VUE_APP_BASE_API\n\nexport default {\n  name(name, isDelete = true) {\n    var url = baseURL + \"/common/download?fileName=\" + encodeURI(name) + \"&delete=\" + isDelete\n    axios({\n      method: 'get',\n      url: url,\n      responseType: 'blob',\n      headers: { 'Authorization': 'Bearer ' + getToken() }\n    }).then(res => {\n      const blob = new Blob([res.data])\n      this.saveAs(blob, decodeURI(res.headers['download-filename']))\n    })\n  },\n  resource(resource) {\n    var url = baseURL + \"/common/download/resource?resource=\" + encodeURI(resource);\n    axios({\n      method: 'get',\n      url: url,\n      responseType: 'blob',\n      headers: { 'Authorization': 'Bearer ' + getToken() }\n    }).then(res => {\n      const blob = new Blob([res.data])\n      this.saveAs(blob, decodeURI(res.headers['download-filename']))\n    })\n  },\n  zip(url, name) {\n    var url = baseURL + url\n    axios({\n      method: 'get',\n      url: url,\n      responseType: 'blob',\n      headers: { 'Authorization': 'Bearer ' + getToken() }\n    }).then(res => {\n      const blob = new Blob([res.data], { type: 'application/zip' })\n      this.saveAs(blob, name)\n    })\n  },\n  saveAs(text, name, opts) {\n    saveAs(text, name, opts);\n  }\n}\n\n"]}]}